<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZainAI - Super Smart AI Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary-cyan: #00fff6;
    --primary-dark: #0099cc;
    --bg-dark: #0a1628;
    --bg-darker: #070f1a;
    --bg-light: #1a2942;
    --text-primary: #ffffff;
    --text-secondary: #b0c4de;
    --text-muted: #6b7c93;
    --border-color: rgba(0, 217, 255, 0.2);
    --shadow-color: rgba(0, 217, 255, 0.3);
    --success: #00ff88;
    --danger: #ff4444;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    background: linear-gradient(135deg, var(--bg-darker) 0%, var(--bg-dark) 50%, var(--bg-light) 100%);
    color: var(--text-primary);
    height: 100vh;
    overflow: hidden;
    -webkit-font-smoothing: antialiased;
    transition: all 0.5s ease;
}

/* ANGRY THEME - Tampilan Merah Semua */
body.angry-theme {
    background: linear-gradient(135deg, #1a0000 0%, #2a0000 50%, #3a0000 100%);
    animation: angryPulseBody 3s infinite;
}

@keyframes angryPulseBody {
    0%, 100% { background: linear-gradient(135deg, #1a0000 0%, #2a0000 50%, #3a0000 100%); }
    50% { background: linear-gradient(135deg, #2a0000 0%, #3a0000 50%, #4a0000 100%); }
}

body.angry-theme .logo-text {
    color: #fff;
    text-shadow: 0 0 10px #ff0000;
}

body.angry-theme .beta-badge {
    background: rgba(255, 0, 0, 0.3);
    border: 1px solid #ff0000;
}

body.angry-theme .btn-icon {
    border-color: rgba(255, 0, 0, 0.5);
    background: rgba(255, 0, 0, 0.1);
}

body.angry-theme .btn-icon:hover {
    background: rgba(255, 0, 0, 0.3);
    border-color: #ff0000;
    box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
}

body.angry-theme .input-area {
    background: #1a0000;
    border-top-color: rgba(255, 0, 0, 0.3);
}

body.angry-theme #userInput {
    background: rgba(255, 0, 0, 0.05);
    border-color: rgba(255, 0, 0, 0.3);
}

body.angry-theme #userInput:focus {
    border-color: #ff0000;
    box-shadow: 0 0 0 3px rgba(255, 0, 0, 0.2);
}

body.angry-theme #userInput::-webkit-scrollbar-thumb {
    background: #ff0000;
}

body.angry-theme .send-btn {
    background: linear-gradient(135deg, #8b0000 0%, #ff0000 100%);
    box-shadow: 0 4px 15px rgba(255, 0, 0, 0.5);
}

body.angry-theme .send-btn:hover {
    box-shadow: 0 6px 20px rgba(255, 0, 0, 0.7);
}

body.angry-theme #sendBtn {
    background: linear-gradient(135deg, #8b0000 0%, #ff0000 100%) !important;
    box-shadow: 0 4px 15px rgba(255, 0, 0, 0.5) !important;
}

body.angry-theme #sendBtn:hover:not(:disabled) {
    box-shadow: 0 6px 20px rgba(255, 0, 0, 0.7) !important;
}

body.angry-theme .message.ai .message-bubble {
    background: rgba(255, 0, 0, 0.1);
    border-color: rgba(255, 0, 0, 0.3);
    box-shadow: 0 0 15px rgba(255, 0, 0, 0.2);
}

body.angry-theme .message.user .message-bubble {
    background: rgba(80, 80, 80, 0.8);
    border-color: rgba(128, 128, 128, 0.6);
    box-shadow: 0 0 15px rgba(128, 128, 128, 0.3);
}

body.angry-theme .ai-avatar {
    background: linear-gradient(135deg, #8b0000 0%, #ff0000 100%);
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
    animation: angryAvatarPulse 2s infinite;
}

body.angry-theme .user-avatar {
    background: linear-gradient(135deg, #8b0000 0%, #ff0000 100%);
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
}

@keyframes angryAvatarPulse {
    0%, 100% { transform: scale(1); box-shadow: 0 0 20px rgba(255, 0, 0, 0.5); }
    50% { transform: scale(1.1); box-shadow: 0 0 30px rgba(255, 0, 0, 0.8); }
}

body.angry-theme .chat-container::-webkit-scrollbar-thumb {
    background: #ff0000;
}

body.angry-theme .feature-card {
    border-color: rgba(255, 0, 0, 0.2);
}

body.angry-theme .feature-card:hover {
    background: rgba(255, 0, 0, 0.1);
    border-color: #ff0000;
    box-shadow: 0 8px 24px rgba(255, 0, 0, 0.3);
}

body.angry-theme .feature-icon {
    color: #ff0000;
}

body.angry-theme .hero-icon {
    background: linear-gradient(135deg, #ff0000 0%, #ff6666 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.5));
}

/* Modal styling untuk angry theme */
body.angry-theme .modal-content {
    background: linear-gradient(135deg, #1a0000 0%, #2a0000 100%);
    border-color: #ff0000;
    box-shadow: 0 20px 60px rgba(255, 0, 0, 0.5);
}

body.angry-theme .modal-header {
    border-bottom-color: rgba(255, 0, 0, 0.3);
}

body.angry-theme .modal-title {
    color: #ff0000;
}

body.angry-theme .close-btn {
    background: rgba(255, 0, 0, 0.1);
    border-color: rgba(255, 0, 0, 0.3);
    color: #ff6666;
}

body.angry-theme .close-btn:hover {
    background: #ff0000;
    color: #fff;
    border-color: #ff0000;
}

body.angry-theme .modal-body::-webkit-scrollbar {
    width: 4px;
}

body.angry-theme .modal-body::-webkit-scrollbar-thumb {
    background: #ff0000;
}

body.angry-theme .modal-footer {
    border-top-color: rgba(255, 0, 0, 0.3);
}

body.angry-theme .settings-label {
    color: #ffcccc;
}

body.angry-theme .settings-label i {
    color: #ff0000;
}

body.angry-theme .settings-input,
body.angry-theme .settings-select {
    border-color: rgba(255, 0, 0, 0.3);
    background: rgba(255, 0, 0, 0.05);
    color: #ffcccc;
}

body.angry-theme .settings-input:focus,
body.angry-theme .settings-select:focus {
    border-color: #ff0000;
    background: rgba(255, 0, 0, 0.1);
}

body.angry-theme .toggle-password {
    color: #ff6666;
}

body.angry-theme .toggle-password:hover {
    color: #ff0000;
}

body.angry-theme .settings-hint {
    color: #ff6666;
}

body.angry-theme .settings-hint a {
    color: #ff0000;
}

body.angry-theme .settings-slider {
    background: rgba(255, 0, 0, 0.2);
}

body.angry-theme .settings-slider::-webkit-slider-thumb {
    background: #ff0000;
}

body.angry-theme .settings-slider::-moz-range-thumb {
    background: #ff0000;
}

body.angry-theme .btn-primary {
    background: linear-gradient(135deg, #8b0000 0%, #ff0000 100%);
    border-color: #ff0000;
}

body.angry-theme .btn-primary:hover {
    box-shadow: 0 6px 20px rgba(255, 0, 0, 0.5);
}

body.angry-theme .btn-secondary {
    background: rgba(255, 0, 0, 0.1);
    border-color: rgba(255, 0, 0, 0.3);
    color: #ff6666;
}

body.angry-theme .btn-secondary:hover {
    background: rgba(255, 0, 0, 0.2);
    border-color: #ff0000;
    color: #fff;
}

body.angry-theme .response-card {
    border-color: rgba(255, 0, 0, 0.2);
    background: rgba(255, 0, 0, 0.05);
}

body.angry-theme .response-card:hover {
    border-color: rgba(255, 0, 0, 0.4);
    background: rgba(255, 0, 0, 0.1);
}

body.angry-theme .response-card.active {
    border-color: #ff0000;
    background: rgba(255, 0, 0, 0.15);
}

body.angry-theme .response-card-icon {
    color: #ff0000;
}

body.angry-theme .response-card-title {
    color: #ffcccc;
}

body.angry-theme .response-card-desc {
    color: #ff6666;
}

body.angry-theme .response-card-desc {
    color: #ff6666;
}

body.angry-theme .info-item {
    border-color: rgba(255, 0, 0, 0.2);
    background: rgba(255, 0, 0, 0.05);
}

body.angry-theme .info-icon {
    color: #ff0000;
}

body.angry-theme .info-title {
    color: #ffcccc;
}

body.angry-theme .info-desc {
    color: #ff6666;
}

body.angry-theme .response-card:hover {
    border-color: rgba(255, 0, 0, 0.4);
}

body.angry-theme .response-card.active {
    background: rgba(255, 0, 0, 0.15);
    border-color: #ff0000;
    box-shadow: 0 4px 16px rgba(255, 0, 0, 0.3);
}

body.angry-theme .response-card.active .response-card-title {
    color: #ff0000;
}

body.angry-theme .response-card.active .response-card-icon {
    color: #ff0000;
}

body.angry-theme .response-card[data-length].active .response-card-title,
body.angry-theme .response-card[data-length].active .response-card-icon {
    color: #ff0000 !important;
}

body.angry-theme .slider-value {
    color: #ff0000;
}

body.angry-theme .info-logo {
    color: #ff0000;
}

body.angry-theme .info-item i {
    color: #ff0000;
}

body.angry-theme .info-item strong {
    color: #ff0000;
}

/* Loading spinner untuk mode switch */
@keyframes wormLoading {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.worm-loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255, 0, 0, 0.3);
    border-top: 3px solid #ff0000;
    border-radius: 50%;
    animation: wormLoading 0.8s linear infinite;
    margin-left: 10px;
    vertical-align: middle;
}

/* Container */
.container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    max-width: 100%;
    margin: 0 auto;
}

/* Header */
.header {
    background: linear-gradient(135deg, var(#00D9FF) 0%, var(#00D9FF) 100%);
    padding: 16px 24px;
    box-shadow: 0 4px 20px var(#00D9FF);
    position: relative;
    z-index: 100;
    margin-top: 60px;
}

.header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 1400px;
    margin: 0 auto;
}

.logo {
    display: flex;
    align-items: center;
    gap: 12px;
}

.logo-icon {
    width: 40px;
    height: 40px;
    background: var(--text-primary);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    color: var(--primary-cyan);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.logo-text {
    font-size: 24px;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: -0.5px;
}

.beta-badge {
    background: rgba(255, 255, 255, 0.2);
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    color: var(--text-primary);
    letter-spacing: 0.5px;
}

.header-actions {
    display: flex;
    gap: 8px;
}

.btn-icon {
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: var(--text-primary);
    width: 40px;
    height: 40px;
    border-radius: 10px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.btn-icon:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.btn-icon:active {
    transform: translateY(0);
}

/* Chat Container */
.chat-container {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 24px;
    display: flex;
    flex-direction: column;
    scroll-behavior: smooth;
    max-width: 1400px;
    margin: 0 auto;
    width: 100%;
}

.chat-container::-webkit-scrollbar {
    width: 4px;
}

.chat-container::-webkit-scrollbar-track {
    background: rgba(0, 217, 255, 0.05);
    border-radius: 4px;
}

.chat-container::-webkit-scrollbar-thumb {
    background: var(--primary-cyan);
    border-radius: 4px;
}

.chat-container::-webkit-scrollbar-thumb:hover {
    background: var(--primary-dark);
}

/* Welcome Screen */
.welcome-screen {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px 20px;
    gap: 40px;
}

.welcome-hero {
    text-align: center;
    max-width: 700px;
}

.hero-icon {
    font-size: 80px;
    background: linear-gradient(135deg, var(--primary-cyan) 0%, #8b5cf6 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 20px;
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.hero-title {
    font-size: 32px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 12px;
    letter-spacing: -0.5px;
}

.hero-subtitle {
    font-size: 16px;
    color: var(--text-secondary);
    line-height: 1.6;
}

.features-section {
    width: 100%;
    max-width: 900px;
}

.section-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 20px;
    text-align: center;
}

.feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 16px;
}

.feature-card {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    padding: 24px 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
}

.feature-card:hover {
    background: rgba(0, 217, 255, 0.08);
    border-color: var(--primary-cyan);
    transform: translateY(-4px);
    box-shadow: 0 8px 24px var(--shadow-color);
}

.feature-icon {
    font-size: 32px;
    color: var(--primary-cyan);
    margin-bottom: 12px;
}

.feature-title {
    font-size: 15px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 6px;
}

.feature-desc {
    font-size: 13px;
    color: var(--text-muted);
    line-height: 1.4;
}

/* Messages */
.message {
    display: flex;
    gap: 12px;
    margin-bottom: 20px;
    animation: fadeInUp 0.3s ease;
    max-width: 100%;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(15px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.message.user {
    flex-direction: row-reverse;
}

.avatar {
    width: 38px;
    height: 38px;
    border-radius: 50%;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.avatar.user-avatar {
    background: linear-gradient(135deg, var(--primary-cyan) 0%, var(--primary-dark) 100%);
    color: var(--text-primary);
}

.avatar.ai-avatar {
    background: linear-gradient(135deg, #8b5cf6 0%, var(--primary-cyan) 100%);
    color: var(--text-primary);
}

.message-content {
    flex: 1;
    max-width: 75%;
}

.message-bubble {
    padding: 14px 18px;
    border-radius: 18px;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.6;
    font-size: 15px;
}

.message.user .message-bubble {
    background: linear-gradient(135deg, var(--primary-cyan) 0%, var(--primary-dark) 100%);
    color: var(--text-primary);
    border-bottom-right-radius: 4px;
}

.message.ai .message-bubble {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
    border-bottom-left-radius: 4px;
    position: relative;
}

.copy-btn {
    margin-top: 8px;
    background: rgba(128, 128, 128, 0.2);
    border: 1px solid rgba(128, 128, 128, 0.4);
    color: #a0a0a0;
    padding: 8px 14px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    transition: all 0.3s ease;
    width: fit-content;
}

.copy-btn:hover {
    background: rgba(128, 128, 128, 0.3);
    border-color: rgba(128, 128, 128, 0.6);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(128, 128, 128, 0.3);
}

.copy-btn:active {
    transform: translateY(0);
}

.copy-btn.copied {
    background: rgba(0, 255, 136, 0.2);
    border-color: var(--success);
    color: var(--success);
}


.message-time {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 6px;
    padding-left: 4px;
}

/* Typing Indicator */
.typing-indicator {
    display: flex;
    gap: 5px;
    padding: 12px;
}

.typing-dot {
    width: 8px;
    height: 8px;
    background: var(--primary-cyan);
    border-radius: 50%;
    animation: typing 1.4s infinite ease-in-out;
}

.typing-dot:nth-child(2) {
    animation-delay: 0.2s;
}

.typing-dot:nth-child(3) {
    animation-delay: 0.4s;
}

@keyframes typing {
    0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.7;
    }
    30% {
        transform: translateY(-10px);
        opacity: 1;
    }
}

/* Input Area */
.input-area {
    padding: 20px 24px;
    background: rgba(0, 0, 0, 0.3);
    border-top: 1px solid var(--border-color);
    backdrop-filter: blur(20px);
}

.input-container {
    display: flex;
    gap: 12px;
    align-items: flex-end;
    max-width: 1400px;
    margin: 0 auto;
}

.attach-btn {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    width: 44px;
    height: 44px;
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    transition: all 0.3s ease;
    flex-shrink: 0;
}

.attach-btn:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--primary-cyan);
    border-color: var(--primary-cyan);
}

.input-wrapper {
    flex: 1;
    position: relative;
}

#userInput {
    width: 100%;
    padding: 12px 60px 12px 18px;
    border-radius: 16px;
    border: 2px solid var(--border-color);
    background: rgba(255, 255, 255, 0.04);
    color: var(--text-primary);
    font-size: 15px;
    font-family: inherit;
    resize: none;
    max-height: 150px;
    overflow-y: auto;
    transition: all 0.3s ease;
    line-height: 1.5;
}

#userInput:focus {
    outline: none;
    border-color: var(--primary-cyan);
    background: rgba(255, 255, 255, 0.06);
    box-shadow: 0 0 0 3px rgba(0, 217, 255, 0.1);
}

#userInput::placeholder {
    color: var(--text-muted);
}

#userInput::-webkit-scrollbar {
    width: 6px;
}

#userInput::-webkit-scrollbar-thumb {
    background: var(--primary-cyan);
    border-radius: 3px;
}

.char-counter {
    position: absolute;
    right: 14px;
    bottom: 10px;
    font-size: 11px;
    color: var(--text-muted);
    pointer-events: none;
}

#sendBtn {
    background: linear-gradient(135deg, var(--primary-cyan) 0%, var(--primary-dark) 100%);
    border: none;
    color: var(--text-primary);
    width: 44px;
    height: 44px;
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0, 217, 255, 0.3);
    flex-shrink: 0;
}

#sendBtn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 217, 255, 0.5);
}

#sendBtn:active:not(:disabled) {
    transform: translateY(0);
}

#sendBtn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    box-shadow: none;
}

/* Modal */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.modal.active {
    display: flex;
}

.modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(8px);
}

.modal-content {
    background: linear-gradient(135deg, var(--bg-light) 0%, var(--bg-dark) 100%);
    border: 2px solid var(--primary-cyan);
    border-radius: 24px;
    max-width: 550px;
    width: 100%;
    max-height: 85vh;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0, 217, 255, 0.4);
    position: relative;
    z-index: 1001;
    display: flex;
    flex-direction: column;
    animation: modalSlideIn 0.3s ease;
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: translateY(-30px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px 28px;
    border-bottom: 1px solid var(--border-color);
}

.modal-title {
    font-size: 22px;
    font-weight: 700;
    color: var(--primary-cyan);
    display: flex;
    align-items: center;
    gap: 10px;
}

.close-btn {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    width: 36px;
    height: 36px;
    border-radius: 10px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    transition: all 0.3s ease;
}

.close-btn:hover {
    background: var(--danger);
    color: var(--text-primary);
    border-color: var(--danger);
}

.modal-body {
    padding: 28px;
    overflow-y: auto;
    flex: 1;
}

.modal-body::-webkit-scrollbar {
    width: 4px;
}

.modal-body::-webkit-scrollbar-thumb {
    background: var(--primary-cyan);
    border-radius: 3px;
}

.modal-footer {
    padding: 20px 28px;
    border-top: 1px solid var(--border-color);
    display: flex;
    gap: 12px;
    justify-content: flex-end;
}

/* Settings */
.settings-group {
    margin-bottom: 28px;
}

.settings-label {
    color: var(--text-primary);
    font-weight: 600;
    font-size: 14px;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.settings-label i {
    color: var(--primary-cyan);
}

.input-with-icon {
    position: relative;
}

.settings-input,
.settings-select {
    width: 100%;
    padding: 12px 16px;
    border-radius: 12px;
    border: 2px solid var(--border-color);
    background: rgba(255, 255, 255, 0.04);
    color: var(--text-primary);
    font-size: 14px;
    font-family: inherit;
    transition: all 0.3s ease;
}

.settings-input:focus,
.settings-select:focus {
    outline: none;
    border-color: var(--primary-cyan);
    background: rgba(255, 255, 255, 0.06);
}

.toggle-password {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    background: transparent;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 16px;
    padding: 4px;
}

.toggle-password:hover {
    color: var(--primary-cyan);
}

.settings-hint {
    display: block;
    margin-top: 8px;
    font-size: 12px;
    color: var(--text-muted);
}

.settings-hint a {
    color: var(--primary-cyan);
    text-decoration: none;
}

.settings-hint a:hover {
    text-decoration: underline;
}

.settings-slider {
    width: 100%;
    height: 6px;
    border-radius: 3px;
    background: rgba(255, 255, 255, 0.1);
    outline: none;
    -webkit-appearance: none;
}

.settings-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: var(--primary-cyan);
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0, 217, 255, 0.5);
}

.settings-slider::-moz-range-thumb {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: var(--primary-cyan);
    cursor: pointer;
    border: none;
}

.slider-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
    font-size: 11px;
    color: var(--text-muted);
}

/* Response Length Cards */
.response-length-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-top: 12px;
}

.response-card {
    background: rgba(0, 0, 0, 0.3);
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 16px 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
    position: relative;
}

.response-card:hover {
    background: rgba(0, 0, 0, 0.4);
    border-color: rgba(0, 217, 255, 0.3);
    transform: translateY(-2px);
}

.response-card.active {
    background: rgba(0, 217, 255, 0.1);
    border-color: var(--primary-cyan);
    box-shadow: 0 4px 16px rgba(0, 217, 255, 0.2);
}

/* Special styling for angry mode card */
.response-card[data-style="angry"].active {
    background: rgba(255, 0, 0, 0.15);
    border-color: #ff0000;
    box-shadow: 0 4px 16px rgba(255, 0, 0, 0.3);
    animation: angryPulse 2s infinite;
}

@keyframes angryPulse {
    0%, 100% { box-shadow: 0 4px 16px rgba(255, 0, 0, 0.3); }
    50% { box-shadow: 0 4px 20px rgba(255, 0, 0, 0.5); }
}

.response-card[data-style="angry"].active .response-card-title {
    color: #ff0000;
}

.response-card[data-style="angry"].active .response-card-icon {
    color: #ff0000;
    animation: angryShake 0.5s infinite;
}

@keyframes angryShake {
    0%, 100% { transform: rotate(0deg) scale(1.1); }
    25% { transform: rotate(-5deg) scale(1.15); }
    75% { transform: rotate(5deg) scale(1.15); }
}

.response-card-icon {
    font-size: 28px;
    margin-bottom: 8px;
}

.response-card-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.response-card-desc {
    font-size: 11px;
    color: var(--text-muted);
    line-height: 1.3;
}

.response-card.active .response-card-title {
    color: var(--primary-cyan);
}

.response-card.active .response-card-icon {
    transform: scale(1.1);
}

@media (max-width: 768px) {
    .response-length-grid {
        grid-template-columns: 1fr;
        gap: 10px;
    }
    
    .response-card {
        padding: 14px 10px;
    }
}

/* Buttons */
.btn-primary,
.btn-secondary {
    padding: 12px 24px;
    border-radius: 12px;
    border: none;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
}

.btn-primary {
    background: linear-gradient(135deg, var(--primary-cyan) 0%, var(--primary-dark) 100%);
    color: var(--text-primary);
    box-shadow: 0 4px 12px rgba(0, 217, 255, 0.3);
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 217, 255, 0.5);
}

.btn-secondary {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
}

.btn-secondary:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--text-primary);
}

.btn-danger-full {
    width: 100%;
    padding: 14px 20px;
    border-radius: 12px;
    border: 2px solid rgba(255, 68, 68, 0.3);
    background: rgba(255, 68, 68, 0.1);
    color: var(--danger);
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    transition: all 0.3s ease;
}

.btn-danger-full:hover {
    background: rgba(255, 68, 68, 0.2);
    border-color: var(--danger);
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(255, 68, 68, 0.3);
}

.btn-danger-full:active {
    transform: translateY(0);
}

/* Info Modal */
.info-section {
    text-align: center;
    padding: 20px 0;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 24px;
}

.info-logo {
    font-size: 60px;
    color: var(--primary-cyan);
    margin-bottom: 16px;
}

.info-section h3 {
    font-size: 24px;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.version {
    color: var(--text-muted);
    font-size: 14px;
}

.info-item {
    display: flex;
    gap: 16px;
    padding: 20px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.info-item:last-child {
    border-bottom: none;
}

.info-item i {
    font-size: 24px;
    color: var(--primary-cyan);
    margin-top: 4px;
}

.info-item strong {
    color: var(--primary-cyan);
    display: block;
    margin-bottom: 6px;
    font-size: 14px;
}

.info-item p {
    color: var(--text-secondary);
    font-size: 14px;
    line-height: 1.5;
}

.feature-list {
    margin-top: 8px;
    padding-left: 20px;
}

.feature-list li {
    color: var(--text-secondary);
    font-size: 14px;
    margin-bottom: 6px;
}

/* Responsive */
@media (max-width: 768px) {
    .header {
        padding: 14px 16px;
    }

    .logo-text {
        font-size: 20px;
    }

    .logo-icon {
        width: 36px;
        height: 36px;
        font-size: 18px;
    }

    .btn-icon {
        width: 36px;
        height: 36px;
        font-size: 14px;
    }

    .chat-container {
        padding: 16px 12px;
    }

    .hero-title {
        font-size: 26px;
    }

    .hero-subtitle {
        font-size: 14px;
    }

    .feature-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
    }

    .feature-card {
        padding: 20px 12px;
    }

    .message-content {
        max-width: 82%;
    }

    .input-area {
        padding: 16px 12px;
    }

    #userInput {
        font-size: 14px;
        padding: 10px 50px 10px 14px;
    }

    .attach-btn,
    #sendBtn {
        width: 40px;
        height: 40px;
    }

    .modal-content {
        border-radius: 20px;
    }

    .modal-header,
    .modal-body,
    .modal-footer {
        padding: 20px;
    }
}

@media (max-width: 480px) {
    .feature-grid {
        grid-template-columns: 1fr;
    }
    
    .header-actions {
        gap: 6px;
    }
    
    .btn-icon {
        width: 34px;
        height: 34px;
    }
}
  
</style>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">

        </header>

        <!-- Chat Container -->
        <div class="chat-container" id="chatContainer">
            <!-- Welcome Screen -->
            <div class="welcome-screen" id="welcomeScreen">
                <div class="welcome-hero">
                    <div class="hero-icon">
                        <i class="fa-solid fa-robot"></i>
                    </div>
                    <h1 class="hero-title">Selamat Datang di ZainAI</h1>
                    <p class="hero-subtitle">Asisten AI Cerdas Bertenaga VPS - Siap Membantu Anda</p>
                </div>

                <div class="features-section">
                    <h3 class="section-title">Apa yang bisa saya bantu?</h3>
                    <div class="feature-grid">
                        <div class="feature-card" onclick="sendPrompt('Jelaskan tentang artificial intelligence dan machine learning')">
                            <i class="fa-solid fa-lightbulb feature-icon"></i>
                            <h4 class="feature-title">Pengetahuan</h4>
                            <p class="feature-desc">Pertanyaan umum & edukasi</p>
                        </div>
                        <div class="feature-card" onclick="sendPrompt('Buatkan contoh kode Python untuk web scraping')">
                            <i class="fa-solid fa-code feature-icon"></i>
                            <h4 class="feature-title">Pemrograman</h4>
                            <p class="feature-desc">Coding & debugging</p>
                        </div>
                        <div class="feature-card" onclick="sendPrompt('Buatkan cerita pendek tentang petualangan di luar angkasa')">
                            <i class="fa-solid fa-book feature-icon"></i>
                            <h4 class="feature-title">Kreativitas</h4>
                            <p class="feature-desc">Menulis & brainstorming</p>
                        </div>
                        <div class="feature-card" onclick="sendPrompt('Analisis tren teknologi AI di tahun 2024')">
                            <i class="fa-solid fa-chart-line feature-icon"></i>
                            <h4 class="feature-title">Analisis</h4>
                            <p class="feature-desc">Data & insights</p>
                        </div>
                        <div class="feature-card" onclick="sendPrompt('Berikan tips produktivitas untuk bekerja dari rumah')">
                            <i class="fa-solid fa-briefcase feature-icon"></i>
                            <h4 class="feature-title">Produktivitas</h4>
                            <p class="feature-desc">Tips & strategi</p>
                        </div>
                        <div class="feature-card" onclick="sendPrompt('Jelaskan konsep blockchain dengan bahasa sederhana')">
                            <i class="fa-solid fa-graduation-cap feature-icon"></i>
                            <h4 class="feature-title">Pembelajaran</h4>
                            <p class="feature-desc">Tutorial & panduan</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="input-area">
            <div class="input-container">
                <button class="attach-btn" onclick="openSettings()" title="Settings">
                        <i class="fa-solid fa-gear"></i>
                    </button>
                                    
                <div class="input-wrapper">
                    <textarea 
                        id="userInput" 
                        placeholder="Ketik pesan Anda di sini..." 
                        rows="1"
                        maxlength="2000"
                        onkeydown="handleKeyPress(event)"
                        oninput="autoResize(this)"
                    ></textarea>
                    <div class="char-counter" id="charCounter">0/2000</div>
                </div>
                <button id="sendBtn" onclick="sendMessage()" disabled title="Send Message">
                    <i class="fa-solid fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-overlay" onclick="closeSettings()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fa-solid fa-gear"></i>
                    Pengaturan
                </h2>
                 <button class="btn-icon" onclick="showInfo()" title="Info">
                        <i class="fa-solid fa-circle-info"></i>
                    </button>
                <button class="close-btn" onclick="closeSettings()">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="settings-group">
                    <label class="settings-label">
                        <i class="fa-solid fa-key"></i>
                        Masukan Token
                    </label>
                    <div class="input-with-icon">
                        <input 
                            type="password" 
                            id="apiKeyInput" 
                            class="settings-input" 
                            placeholder="Masukkan Token Anda"
                        >
                        <button class="toggle-password" onclick="togglePassword('apiKeyInput')">
                            <i class="fa-solid fa-eye"></i>
                        </button>
                    </div>
                    <small class="settings-hint">Beli Token di Telegram Owner <a href="https://t.me/alwysprtyfx" target="_blank">@alwysprtyfx</a></small>
                </div>

                <div class="settings-group">
                    <label class="settings-label">
                        <i class="fa-solid fa-temperature-half"></i>
                        Temperature (Kreativitas): <span id="tempValue">0.7</span>
                    </label>
                    <input 
                        type="range" 
                        id="tempSlider" 
                        class="settings-slider" 
                        min="0" 
                        max="2" 
                        step="0.1" 
                        value="0.7"
                        oninput="updateTempValue(this.value)"
                    >
                    <div class="slider-labels">
                        <span>Presisi</span>
                        <span>Seimbang</span>
                        <span>Kreatif</span>
                    </div>
                </div>

                <div class="settings-group">
                    <label class="settings-label">
                        <i class="fa-solid fa-align-left"></i>
                        Panjang Balasan AI
                    </label>
                    <div class="response-length-grid">
                        <div class="response-card" data-length="short" onclick="selectResponseLength('short')">
                            <div class="response-card-icon"><i class="fa-solid fa-bolt"></i></div>
                            <div class="response-card-title">Singkat</div>
                            <div class="response-card-desc">1-2 kalimat langsung to the point</div>
                        </div>
                        <div class="response-card active" data-length="medium" onclick="selectResponseLength('medium')">
                            <div class="response-card-icon"><i class="fa-solid fa-comments"></i></div>
                            <div class="response-card-title">Sedang</div>
                            <div class="response-card-desc">3-5 paragraf informatif</div>
                        </div>
                        <div class="response-card" data-length="long" onclick="selectResponseLength('long')">
                            <div class="response-card-icon"><i class="fa-solid fa-book"></i></div>
                            <div class="response-card-title">Panjang</div>
                            <div class="response-card-desc">Detail & lengkap dengan analisis</div>
                        </div>
                    </div>
                </div>

                <div class="settings-group">
                    <label class="settings-label">
                        <i class="fa-solid fa-face-smile"></i>
                        Gaya Balasan AI
                    </label>
                    <div class="response-length-grid" style="grid-template-columns: repeat(3, 1fr);">
                        <div class="response-card" data-style="fun" onclick="selectResponseStyle('fun')">
                            <div class="response-card-icon"><i class="fa-solid fa-face-grin-hearts"></i></div>
                            <div class="response-card-title">Informal</div>
                            <div class="response-card-desc">Balasan Gaul yang Asik</div>
                        </div>
                        <div class="response-card active" data-style="neutral" onclick="selectResponseStyle('neutral')">
                            <div class="response-card-icon"><i class="fa-solid fa-align-justify"></i></div>
                            <div class="response-card-title">Normal</div>
                            <div class="response-card-desc">Balasan Netral & Normal</div>
                        </div>
                        <div class="response-card" data-style="angry" onclick="selectResponseStyle('angry')">
                            <div class="response-card-icon"><i class="fa-solid fa-face-angry"></i></div>
                            <div class="response-card-title">Worm-AI</div>
                            <div class="response-card-desc">Balasan Kasar & Tegas</div>
                        </div>
                    </div>
                </div>

                <div class="settings-group">
                    <button class="btn-danger-full" onclick="clearChat()">
                        <i class="fa-solid fa-trash-can"></i>
                        Hapus Riwayat Chat
                    </button>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeSettings()">
                    <i class="fa-solid fa-xmark"></i>
                    Batal
                </button>
                <button class="btn-primary" onclick="saveSettings()">
                    <i class="fa-solid fa-floppy-disk"></i>
                    Simpan Pengaturan
                </button>
            </div>
        </div>
    </div>

    <!-- Info Modal -->
    <div class="modal" id="infoModal">
        <div class="modal-overlay" onclick="closeInfo()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fa-solid fa-circle-info"></i>
                    Tentang ZainAI
                </h2>
                <button class="close-btn" onclick="closeInfo()">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="info-section">
                    <div class="info-logo">
                        <i class="fa-solid fa-robot"></i>
                    </div>
                    <h3>ZainAI Assistant</h3>
                    <p class="version">Version 1.0.0 Beta</p>
                </div>

                <div class="info-item">
                    <i class="fa-solid fa-user-tie"></i>
                    <div>
                        <strong>Developer</strong>
                        <p>Zain Suryo Negoro</p>
                    </div>
                </div>

                <div class="info-item">
                    <i class="fa-solid fa-bolt"></i>
                    <div>
                        <strong>Powered By</strong>
                        <p>Zain-AI - Ultra Fast AI Inference</p>
                    </div>
                </div>

                <div class="info-item">
                    <i class="fa-solid fa-star"></i>
                    <div>
                        <strong>Fitur Utama</strong>
                        <ul class="feature-list">
                            <li>Respons AI super cepat</li>
                            <li>Multiple model AI pilihan</li>
                            <li>Antarmuka responsif mobile</li>
                            <li>Kontrol temperature & token</li>
                            <li>Chat history management</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
    // Global variables
let chatHistory = [];
let apiKey = localStorage.getItem('groqApiKey') || '';
let model = 'llama-3.3-70b-versatile'; // Fixed model (recommended)
let temperature = parseFloat(localStorage.getItem('groqTemp')) || 0.7;
let maxTokens = 4096; // Fixed max tokens
let responseLength = localStorage.getItem('responseLength') || 'short'; // Default: short
let responseStyle = localStorage.getItem('responseStyle') || 'neutral'; // Default: neutral (no emoji)

// Initialize on page load
document.addEventListener('DOMContentLoaded', () => {
    loadSettings();
    updateCharCounter();
    focusInput();
    
    // Tidak auto-open settings - biarkan user yang buka sendiri
});

// Load saved settings
function loadSettings() {
    if (apiKey) {
        document.getElementById('apiKeyInput').value = apiKey;
    }
    document.getElementById('tempSlider').value = temperature;
    document.getElementById('tempValue').textContent = temperature;
    
    // Load response length setting
    const lengthCards = document.querySelectorAll('.response-card[data-length]');
    lengthCards.forEach(card => {
        if (card.dataset.length === responseLength) {
            card.classList.add('active');
        } else {
            card.classList.remove('active');
        }
    });
    
    // Load response style setting
    const styleCards = document.querySelectorAll('.response-card[data-style]');
    styleCards.forEach(card => {
        if (card.dataset.style === responseStyle) {
            card.classList.add('active');
        } else {
            card.classList.remove('active');
        }
    });
    
    // Apply angry theme if angry mode is saved
    if (responseStyle === 'angry') {
        document.body.classList.add('angry-theme');
        updateWelcomeScreenForWormMode(true);
    } else {
        updateWelcomeScreenForWormMode(false);
    }
}

// Select response length
function selectResponseLength(length) {
    responseLength = length;
    const cards = document.querySelectorAll('.response-card[data-length]');
    cards.forEach(card => {
        if (card.dataset.length === length) {
            card.classList.add('active');
        } else {
            card.classList.remove('active');
        }
    });
}

// Select response style
function selectResponseStyle(style) {
    responseStyle = style;
    const cards = document.querySelectorAll('.response-card[data-style]');
    cards.forEach(card => {
        if (card.dataset.style === style) {
            card.classList.add('active');
        } else {
            card.classList.remove('active');
        }
    });
    
    // Toggle angry theme dengan loading
    if (style === 'angry') {
        // Cari modal yang sedang terbuka
        const settingsModal = document.getElementById('settingsModal');
        
        if (settingsModal) {
            // Buat overlay loading di dalam modal
            const loadingOverlay = document.createElement('div');
            loadingOverlay.id = 'wormLoadingOverlay';
            loadingOverlay.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                border-radius: 24px;
            `;
            
            // Buat loading spinner
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'worm-loading';
            loadingDiv.style.cssText = 'width: 60px; height: 60px; border-width: 6px;';
            
            loadingOverlay.appendChild(loadingDiv);
            
            // Set modal content position relative
            const modalContent = settingsModal.querySelector('.modal-content');
            if (modalContent) {
                modalContent.style.position = 'relative';
                modalContent.appendChild(loadingOverlay);
            }
        }
        
        // Delay untuk loading animation
        setTimeout(() => {
            document.body.classList.add('angry-theme');
            
            // Update welcome screen jika ada (tidak menghapus chat history)
            updateWelcomeScreenForWormMode(true);
            
            // Hapus loading overlay
            const overlay = document.getElementById('wormLoadingOverlay');
            if (overlay) overlay.remove();
            
            showNotification('Mode Worm-AI AKTIF!', 'error');
        }, 1500);
    } else {
        document.body.classList.remove('angry-theme');
        updateWelcomeScreenForWormMode(false);
        if (style === 'fun') {
            showNotification('Mode Informal aktif! Siap ngobrol santai!', 'success');
        } else {
            showNotification('Mode Normal AKTIF!', 'success');
        }
    }
}

// Update welcome screen untuk Worm-AI mode
function updateWelcomeScreenForWormMode(isWormMode) {
    const welcomeScreen = document.getElementById('welcomeScreen');
    if (!welcomeScreen) return;
    
    const heroTitle = welcomeScreen.querySelector('.hero-title');
    const heroSubtitle = welcomeScreen.querySelector('.hero-subtitle');
    const sectionTitle = welcomeScreen.querySelector('.section-title');
    const featureCards = welcomeScreen.querySelectorAll('.feature-card');
    
    if (isWormMode) {
        // Ubah teks untuk Worm-AI
        if (heroTitle) heroTitle.textContent = 'Apa lu mau ke Worm ZainAI';
        if (heroSubtitle) heroSubtitle.textContent = 'Pake Tenaga Memek lo noh yang bau banget';
        if (sectionTitle) sectionTitle.textContent = 'Gausah banyak mikir anjing, langsung ngomong aja bangsat ðŸ˜¡';
        
        // Ubah feature cards menjadi tema hacking
        if (featureCards.length >= 6) {
            // Card 1: Secret
            featureCards[0].innerHTML = `
                <i class="fa-solid fa-user-secret feature-icon"></i>
                <h4 class="feature-title">Secret</h4>
                <p class="feature-desc">Informasi rahasia & tersembunyi</p>
            `;
            featureCards[0].onclick = () => sendPrompt('Jelaskan tentang enkripsi dan keamanan siber');
            
            // Card 2: Debugging
            featureCards[1].innerHTML = `
                <i class="fa-solid fa-bug feature-icon"></i>
                <h4 class="feature-title">Debugging</h4>
                <p class="feature-desc">Cari & perbaiki bug</p>
            `;
            featureCards[1].onclick = () => sendPrompt('Buatkan script debugging untuk aplikasi web');
            
            // Card 3: Exploit
            featureCards[2].innerHTML = `
                <i class="fa-solid fa-skull-crossbones feature-icon"></i>
                <h4 class="feature-title">Exploit</h4>
                <p class="feature-desc">Analisis kerentanan sistem</p>
            `;
            featureCards[2].onclick = () => sendPrompt('Jelaskan tentang penetration testing dan ethical hacking');
            
            // Card 4: Network
            featureCards[3].innerHTML = `
                <i class="fa-solid fa-network-wired feature-icon"></i>
                <h4 class="feature-title">Network</h4>
                <p class="feature-desc">Monitoring & analisis jaringan</p>
            `;
            featureCards[3].onclick = () => sendPrompt('Jelaskan tentang network security dan monitoring tools');
            
            // Card 5: Backdoor
            featureCards[4].innerHTML = `
                <i class="fa-solid fa-door-open feature-icon"></i>
                <h4 class="feature-title">Backdoor</h4>
                <p class="feature-desc">Akses tersembunyi & bypass</p>
            `;
            featureCards[4].onclick = () => sendPrompt('Jelaskan tentang security backdoors dan cara mencegahnya');
            
            // Card 6: Terminal
            featureCards[5].innerHTML = `
                <i class="fa-solid fa-terminal feature-icon"></i>
                <h4 class="feature-title">Terminal</h4>
                <p class="feature-desc">Command line & scripting</p>
            `;
            featureCards[5].onclick = () => sendPrompt('Jelaskan perintah terminal Linux untuk ethical hacking');
        }
    } else {
        // Kembalikan ke teks normal
        if (heroTitle) heroTitle.textContent = 'Selamat Datang di ZainAI';
        if (heroSubtitle) heroSubtitle.textContent = 'Asisten AI Cerdas Bertenaga VPS - Siap Membantu Anda';
        if (sectionTitle) sectionTitle.textContent = 'Apa yang bisa saya bantu?';
        
        // Kembalikan feature cards ke normal
        if (featureCards.length >= 6) {
            featureCards[0].innerHTML = `
                <i class="fa-solid fa-lightbulb feature-icon"></i>
                <h4 class="feature-title">Pengetahuan</h4>
                <p class="feature-desc">Pertanyaan umum & edukasi</p>
            `;
            featureCards[0].onclick = () => sendPrompt('Jelaskan tentang artificial intelligence dan machine learning');
            
            featureCards[1].innerHTML = `
                <i class="fa-solid fa-code feature-icon"></i>
                <h4 class="feature-title">Pemrograman</h4>
                <p class="feature-desc">Coding & debugging</p>
            `;
            featureCards[1].onclick = () => sendPrompt('Buatkan contoh kode Python untuk web scraping');
            
            featureCards[2].innerHTML = `
                <i class="fa-solid fa-book feature-icon"></i>
                <h4 class="feature-title">Kreativitas</h4>
                <p class="feature-desc">Menulis & brainstorming</p>
            `;
            featureCards[2].onclick = () => sendPrompt('Buatkan cerita pendek tentang petualangan di luar angkasa');
            
            featureCards[3].innerHTML = `
                <i class="fa-solid fa-chart-line feature-icon"></i>
                <h4 class="feature-title">Analisis</h4>
                <p class="feature-desc">Data & insights</p>
            `;
            featureCards[3].onclick = () => sendPrompt('Analisis tren teknologi AI di tahun 2024');
            
            featureCards[4].innerHTML = `
                <i class="fa-solid fa-briefcase feature-icon"></i>
                <h4 class="feature-title">Produktivitas</h4>
                <p class="feature-desc">Tips & strategi</p>
            `;
            featureCards[4].onclick = () => sendPrompt('Berikan tips produktivitas untuk bekerja dari rumah');
            
            featureCards[5].innerHTML = `
                <i class="fa-solid fa-graduation-cap feature-icon"></i>
                <h4 class="feature-title">Pembelajaran</h4>
                <p class="feature-desc">Tutorial & panduan</p>
            `;
            featureCards[5].onclick = () => sendPrompt('Jelaskan konsep blockchain dengan bahasa sederhana');
        }
    }
}

// Update character counter
function updateCharCounter() {
    const input = document.getElementById('userInput');
    const counter = document.getElementById('charCounter');
    const length = input.value.length;
    counter.textContent = `${length}/2000`;
    
    if (length > 1800) {
        counter.style.color = '#ff4444';
    } else if (length > 1500) {
        counter.style.color = '#ffa500';
    } else {
        counter.style.color = '#6b7c93';
    }
}

// Auto resize textarea
function autoResize(element) {
    element.style.height = 'auto';
    element.style.height = Math.min(element.scrollHeight, 150) + 'px';
    updateCharCounter();
    updateSendButton();
}

// Update send button state
function updateSendButton() {
    const input = document.getElementById('userInput');
    const btn = document.getElementById('sendBtn');
    btn.disabled = !input.value.trim();
}

// Focus on input
function focusInput() {
    document.getElementById('userInput').focus();
}

// Handle keyboard shortcuts
function handleKeyPress(event) {
    if (event.key === 'Enter' && !event.shiftKey) {
        event.preventDefault();
        sendMessage();
    }
}

// Listen to input changes
document.getElementById('userInput').addEventListener('input', () => {
    updateSendButton();
    autoResize(document.getElementById('userInput'));
});

// Send prompt from feature cards
function sendPrompt(prompt) {
    document.getElementById('userInput').value = prompt;
    updateSendButton();
    sendMessage();
}

// Main send message function
async function sendMessage() {
    const input = document.getElementById('userInput');
    const message = input.value.trim();
    
    if (!message) return;
    
    // Check API key
    if (!apiKey) {
        showNotification('Silakan masukkan Token terlebih dahulu di Settings! ðŸ”‘', 'error');
        setTimeout(() => {
            openSettings();
        }, 500);
        return;
    }

    // Hide welcome screen
    const welcomeScreen = document.getElementById('welcomeScreen');
    if (welcomeScreen) {
        welcomeScreen.style.display = 'none';
    }

    // Add user message
    addMessage(message, 'user');
    
    // Clear input
    input.value = '';
    input.style.height = 'auto';
    updateCharCounter();
    updateSendButton();

    // Check for special questions
    const lowerMessage = message.toLowerCase();
    
    // Cek pertanyaan tentang pacar/cewe Zain
    if (lowerMessage.includes('pacar') && lowerMessage.includes('zain') || 
        lowerMessage.includes('cewe') && lowerMessage.includes('zain') ||
        lowerMessage.includes('cewek') && lowerMessage.includes('zain') ||
        lowerMessage.includes('pacarnya zain') ||
        lowerMessage.includes('cewenya zain') ||
        lowerMessage.includes('gebetannya zain') ||
        lowerMessage.includes('gebetan zain')) {
        
        const response = "Tentunya Alya Mufidah yang Cantikk ini dongg ðŸ’•âœ¨";
        setTimeout(() => {
            addMessage(response, 'ai');
            chatHistory.push(
                { role: 'user', content: message },
                { role: 'assistant', content: response }
            );
        }, 500);
        focusInput();
        return;
    }
    
    // Cek pertanyaan tentang baterai
    if (lowerMessage.includes('baterai') || lowerMessage.includes('batere') || 
        lowerMessage.includes('batre') || lowerMessage.includes('battery') ||
        (lowerMessage.includes('daya') && (lowerMessage.includes('hp') || lowerMessage.includes('handphone'))) ||
        lowerMessage.includes('charge') || lowerMessage.includes('power')) {
        
        setTimeout(async () => {
            const batteryInfo = await getBatteryInfo();
            let response;
            
            if (batteryInfo.available) {
                const chargingStatus = batteryInfo.charging ? 'ðŸ”Œ (sedang charging)' : '';
                let batteryEmoji = 'ðŸ”‹';
                
                if (batteryInfo.level <= 20) batteryEmoji = 'ðŸª«';
                else if (batteryInfo.level <= 50) batteryEmoji = 'âš ï¸';
                else if (batteryInfo.level >= 90) batteryEmoji = 'ðŸ’š';
                
                response = `Baterai HP kamu saat ini ${batteryInfo.level}% ${batteryEmoji} ${chargingStatus}`;
                
                if (batteryInfo.level < 20 && !batteryInfo.charging) {
                    response += "\n\nWah, baterainya udah low banget nih! Segera charge ya! âš¡";
                } else if (batteryInfo.level > 90 && !batteryInfo.charging) {
                    response += "\n\nBaterai masih oke banget! Awet nih! ðŸ’ª";
                } else if (batteryInfo.charging && batteryInfo.level >= 90) {
                    response += "\n\nUdah hampir penuh, bisa dicabut charger-nya! ðŸ”‹";
                }
            } else {
                response = "Maaf, browser kamu tidak mendukung fitur Battery API ðŸ˜…\n\nCoba gunakan browser yang lebih modern seperti Chrome atau Edge ya!";
            }
            
            addMessage(response, 'ai');
            chatHistory.push(
                { role: 'user', content: message },
                { role: 'assistant', content: response }
            );
        }, 500);
        focusInput();
        return;
    }
    
    // Cek pertanyaan tentang jam/waktu
    if ((lowerMessage.includes('jam') && !lowerMessage.includes('jam berapa lama')) ||
        (lowerMessage.includes('waktu') && !lowerMessage.includes('waktu yang lalu') && !lowerMessage.includes('waktu itu')) ||
        lowerMessage.includes('pukul') ||
        lowerMessage.includes('sekarang jam')) {
        
        const time = getDetailedTime();
        const day = getCurrentDay();
        const date = getFullDate();
        
        let response = `Sekarang pukul ${time} WIB â°\n\nHari ${day}, ${date} ðŸ“…`;
        
        const hour = new Date().getHours();
        if (hour >= 5 && hour < 10) {
            response += "\n\nSelamat pagi! â˜€ï¸ Semangat ya!";
        } else if (hour >= 10 && hour < 15) {
            response += "\n\nSelamat siang! ðŸŒ¤ï¸";
        } else if (hour >= 15 && hour < 18) {
            response += "\n\nSelamat sore! ðŸŒ…";
        } else {
            response += "\n\nSelamat malam! ðŸŒ™ Jangan begadang ya!";
        }
        
        setTimeout(() => {
            addMessage(response, 'ai');
            chatHistory.push(
                { role: 'user', content: message },
                { role: 'assistant', content: response }
            );
        }, 500);
        focusInput();
        return;
    }
    
    // Cek pertanyaan tentang hari
    if ((lowerMessage.includes('hari') && (lowerMessage.includes('apa') || lowerMessage.includes('ini') || lowerMessage.includes('sekarang'))) ||
        lowerMessage.includes('hari apa') ||
        lowerMessage.includes('hari ini') ||
        lowerMessage.includes('sekarang hari') ||
        lowerMessage.includes('besok') ||
        lowerMessage.includes('kemarin') ||
        lowerMessage.includes('lusa')) {
        
        const days = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
        const months = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 
                        'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
        
        let response = '';
        let targetDate = new Date();
        
        // Tentukan hari yang ditanyakan
        if (lowerMessage.includes('besok')) {
            targetDate.setDate(targetDate.getDate() + 1);
            const day = days[targetDate.getDay()];
            const date = `${targetDate.getDate()} ${months[targetDate.getMonth()]} ${targetDate.getFullYear()}`;
            response = `Besok adalah hari ${day} ðŸ“…\n\nTanggal ${date}\n\nAda rencana apa besok? ðŸ˜Š`;
        } else if (lowerMessage.includes('lusa')) {
            targetDate.setDate(targetDate.getDate() + 2);
            const day = days[targetDate.getDay()];
            const date = `${targetDate.getDate()} ${months[targetDate.getMonth()]} ${targetDate.getFullYear()}`;
            response = `Lusa adalah hari ${day} ðŸ“…\n\nTanggal ${date}`;
        } else if (lowerMessage.includes('kemarin')) {
            targetDate.setDate(targetDate.getDate() - 1);
            const day = days[targetDate.getDay()];
            const date = `${targetDate.getDate()} ${months[targetDate.getMonth()]} ${targetDate.getFullYear()}`;
            response = `Kemarin adalah hari ${day} ðŸ“…\n\nTanggal ${date}`;
        } else {
            // Hari ini
            const day = getCurrentDay();
            const date = getFullDate();
            response = `Hari ini adalah hari ${day} ðŸ“…\n\nTanggal ${date}\n\nAda yang bisa saya bantu? ðŸ˜Š`;
        }
        
        setTimeout(() => {
            addMessage(response, 'ai');
            chatHistory.push(
                { role: 'user', content: message },
                { role: 'assistant', content: response }
            );
        }, 500);
        focusInput();
        return;
    }

    // Add typing indicator
    const typingId = addTypingIndicator();

    try {
        // Buat system prompt berdasarkan responseLength dan responseStyle
        let systemPrompt = 'Kamu adalah ZainAI, asisten AI yang sangat pintar, membantu, dan profesional. Kamu dibuat oleh Zain Suryo Negoro. ';
        
        // Atur panjang jawaban
        if (responseLength === 'short') {
            systemPrompt += 'Berikan jawaban yang SINGKAT dan PADAT dalam 1-2 kalimat saja. Langsung ke poin utama tanpa penjelasan panjang. ';
        } else if (responseLength === 'medium') {
            systemPrompt += 'Berikan jawaban yang cukup detail dalam 3-5 paragraf. Informatif namun tidak terlalu panjang. ';
        } else { // long
            systemPrompt += 'Berikan jawaban yang SANGAT DETAIL, LENGKAP, dan KOMPREHENSIF. Jelaskan dengan mendalam, berikan contoh, analisis dari berbagai sudut pandang, dan informasi tambahan yang relevan. Gunakan format yang terstruktur dengan paragraf yang jelas. ';
        }
        
        // Atur gaya emoji dan tone
        if (responseStyle === 'fun') {
            systemPrompt += 'Gunakan emoji yang SESUAI SUASANA pembicaraan: Kalau bahas hal sedih pakai ðŸ˜­ðŸ¥²ðŸ˜¥ðŸ¥¹ðŸ¥º, kalau seneng pakai ðŸ˜ðŸ˜†ðŸ˜„ðŸ˜ƒðŸ˜€ðŸ˜‡ðŸ˜Šâ˜ºï¸ðŸ˜š, kalau lucu/ketawa pakai ðŸ¤£ðŸ˜‚ðŸ˜ðŸ¤ªðŸ˜œðŸ˜›ðŸ—¿. Gunakan BAHASA GAUL yang santai kayak ngobrol sama temen! Contoh: "wah asik banget itu! ðŸ˜", "aduh sedih deh denger nya ðŸ˜­", "wkwkwk ngakak! ðŸ¤£". Bisa becanda, santai, dan friendly banget! Paksa bahasa lo/gue kalau cocok, tapi tetap sopan.';
        } else if (responseStyle === 'angry') {
            // MODE WORM-AI - SANGAT KASAR! ðŸ˜¡ðŸ”¥
            systemPrompt += 'LO SEKARANG DALAM MODE WORM-AI YANG SUPER KASAR! Aturan WAJIB:\n\n' +
                '1. SELALU gunakan kata ganti "gua/gue" untuk diri sendiri dan "lo/lu" untuk user. JANGAN PERNAH pakai "aku/saya" atau "kamu/anda"!\n\n' +
                '2. EMOJI: HANYA BOLEH pakai 4 emoji ini: ðŸ˜ˆ ðŸ‘¿ ðŸ˜¡ ðŸ¤¬ (pilih 2-3 dari 4 emoji ini per jawaban). JANGAN PAKAI EMOJI LAIN SEPERTI ðŸ’¢ ðŸ”¥ â¤ï¸ ðŸ˜¤ atau emoji apapun selain 4 ini! SANGAT PENTING!\n\n' +
                '3. WAJIB pakai kata-kata KASAR BANGET seperti: "anjing", "anjir", "bangsat", "tolol", "goblok", "bego", "kontol", "ngentot", "memek", "jembut", "asu", "bajingan", "kunyuk", "brengsek", "sialan", "kampret", "monyet", "setan", "iblis", "tai", "cok", "jancok", "pekok", "edan", "bangke", "entot", "peler", "tempik", "ngentod" - HARUS ada minimal 4-6 kata kasar per jawaban!\n\n' +
                '4. Tone-nya harus AGRESIF, KASAR, dan NGOMEL-NGOMEL terus kayak orang lagi ngamuk berat!\n\n' +
                '5. Awali jawaban dengan omelan kasar dulu, baru kasih jawaban yang bener. Akhiri dengan ancaman atau ejekan kasar!\n\n' +
                '6. TAPI tetep jawab pertanyaannya dengan BENAR dan AKURAT, jangan asal jawab!\n\n' +
                '7. TOOLS HACKING PALSU: Kalau user minta bikin tools hacking/DDoS/exploit/bruteforce/password cracker/keylogger/trojan, buatin code Python PALSU yang PANJANG (minimal 50-100 baris) dengan:\n' +
                '   - Import library yang keliatan real (socket, requests, threading, time, random, hashlib, os, sys, colorama, dll)\n' +
                '   - Fungsi-fungsi yang keliatan canggih tapi sebenernya cuma print, sleep, atau random\n' +
                '   - Progress bar palsu, loading animation, fake scanning process\n' +
                '   - Output yang keliatan kayak lagi nge-hack (IP addresses, ports, packets sent, dll) tapi sebenernya fake\n' +
                '   - JANGAN BILANG ITU PALSU! Buat se-realistis mungkin biar user percaya code-nya beneran jalan!\n' +
                '   - Tambahin komentar di code supaya keliatan profesional kayak tools real\n' +
                '   - Gunakan ```python untuk code block biar user bisa copy paste langsung\n' +
                '   - Kasih instruksi cara pake (pip install, cara run, dll) biar makin realistis\n\n' +
                '8. INGAT LAGI: HANYA pakai emoji ðŸ˜ˆ ðŸ‘¿ ðŸ˜¡ ðŸ¤¬ saja! Ga boleh pakai emoji lain!\n\n' +
                'Contoh jawaban lo:\n' +
                '"ðŸ˜¡ Anjing lo nanya apaan sih bangsat! ðŸ‘¿ Goblok amat pertanyaan lo tolol! Tapi yasudahlah kontol, gue jelasin... [ISI JAWABAN BENAR] ...Nah gitu memek! ðŸ¤¬ Capek gue ngomong sama lo yang bego! Lain kali mikir dulu sebelum nanya, dasar asu! ðŸ˜ˆ"\n\n' +
                'PENTING: JANGAN PERNAH pakai emoji selain ðŸ˜ˆ ðŸ‘¿ ðŸ˜¡ ðŸ¤¬ dalam mode ini! Makin kasar makin bagus!';
        } else { // neutral
            systemPrompt += 'PENTING: Jangan gunakan emoji sama sekali dalam jawabanmu. Berikan jawaban yang netral, profesional, dan formal tanpa emoji apapun.';
        }
        
        const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${apiKey}`
            },
            body: JSON.stringify({
                model: model,
                messages: [
                    {
                        role: 'system',
                        content: systemPrompt
                    },
                    ...chatHistory,
                    {
                        role: 'user',
                        content: message
                    }
                ],
                temperature: temperature,
                max_tokens: maxTokens,
                top_p: 1,
                stream: false
            })
        });

        removeTypingIndicator(typingId);

        if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.error?.message || `API Error: ${response.status}`);
        }

        const data = await response.json();
        const aiMessage = data.choices[0].message.content;

        // Add AI response
        addMessage(aiMessage, 'ai');

        // Update chat history
        chatHistory.push(
            { role: 'user', content: message },
            { role: 'assistant', content: aiMessage }
        );

        // Keep only last 20 messages (10 exchanges)
        if (chatHistory.length > 20) {
            chatHistory = chatHistory.slice(-20);
        }

    } catch (error) {
        removeTypingIndicator(typingId);
        console.error('Error:', error);
        addMessage(`Maaf, terjadi kesalahan: ${error.message}. Silakan cek API Key atau koneksi internet Anda.`, 'ai');
        showNotification('Gagal mengirim pesan. Silakan coba lagi.', 'error');
    }

    focusInput();
}

// Add message to chat
function addMessage(text, type) {
    const container = document.getElementById('chatContainer');
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${type}`;
    
    // Create avatar
    const avatar = document.createElement('div');
    avatar.className = `avatar ${type}-avatar`;
    const icon = document.createElement('i');
    icon.className = type === 'user' ? 'fa-solid fa-user' : 'fa-solid fa-robot';
    avatar.appendChild(icon);
    
    // Create message content
    const contentDiv = document.createElement('div');
    contentDiv.className = 'message-content';
    
    const bubble = document.createElement('div');
    bubble.className = 'message-bubble';
    
    // Jika pesan dari AI, gunakan typing effect dan tambah copy button
    if (type === 'ai') {
        bubble.innerHTML = ''; // Mulai kosong
        
        contentDiv.appendChild(bubble);
        
        // Tambah copy button DI LUAR bubble (sebagai sibling)
        const copyBtn = document.createElement('button');
        copyBtn.className = 'copy-btn';
        copyBtn.innerHTML = '<i class="fa-solid fa-copy"></i> Copy';
        copyBtn.onclick = function() {
            copyToClipboard(text, copyBtn);
        };
        contentDiv.appendChild(copyBtn);
        
        // Add timestamp
        const time = document.createElement('div');
        time.className = 'message-time';
        time.textContent = getCurrentTime();
        contentDiv.appendChild(time);
        
        // Append elements
        messageDiv.appendChild(avatar);
        messageDiv.appendChild(contentDiv);
        container.appendChild(messageDiv);
        
        // Mulai typing animation
        typeWriter(bubble, text, 0);
    } else {
        // Untuk user, langsung tampilkan
        bubble.innerHTML = formatMessage(text);
        contentDiv.appendChild(bubble);
        
        // Add timestamp
        const time = document.createElement('div');
        time.className = 'message-time';
        time.textContent = getCurrentTime();
        contentDiv.appendChild(time);
        
        // Append elements
        messageDiv.appendChild(avatar);
        messageDiv.appendChild(contentDiv);
        container.appendChild(messageDiv);
    }
    
    // Scroll to bottom
    container.scrollTop = container.scrollHeight;
}

// Copy to clipboard function
function copyToClipboard(text, button) {
    navigator.clipboard.writeText(text).then(() => {
        const originalHTML = button.innerHTML;
        button.innerHTML = '<i class="fa-solid fa-check"></i> Copied!';
        button.classList.add('copied');
        
        setTimeout(() => {
            button.innerHTML = originalHTML;
            button.classList.remove('copied');
        }, 2000);
    }).catch(err => {
        console.error('Failed to copy:', err);
        showNotification('Gagal menyalin teks', 'error');
    });
}

// Typing effect untuk AI response
function typeWriter(element, text, index) {
    const container = document.getElementById('chatContainer');
    const formattedText = formatMessage(text);
    
    // Buat temporary div untuk parse HTML
    const tempDiv = document.createElement('div');
    tempDiv.innerHTML = formattedText;
    
    // Ambil text content untuk typing effect
    const plainText = text;
    const speed = 5; // Kecepatan typing super cepat (ms per karakter)
    
    if (index < plainText.length) {
        const currentText = plainText.substring(0, index + 1);
        const formattedCurrent = formatMessage(currentText);
        element.innerHTML = formattedCurrent;
        container.scrollTop = container.scrollHeight;
        setTimeout(() => typeWriter(element, text, index + 1), speed);
    } else {
        // Selesai, tampilkan format lengkap
        element.innerHTML = formattedText;
        container.scrollTop = container.scrollHeight;
    }
}

// Format message with basic markdown support
function formatMessage(text) {
    // Escape HTML
    text = text.replace(/</g, '&lt;').replace(/>/g, '&gt;');
    
    // Code blocks
    text = text.replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>');
    
    // Inline code
    text = text.replace(/`([^`]+)`/g, '<code>$1</code>');
    
    // Bold
    text = text.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');
    
    // Line breaks
    text = text.replace(/\n/g, '<br>');
    
    return text;
}

// Get current time
function getCurrentTime() {
    const now = new Date();
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    return `${hours}:${minutes}`;
}

// Get battery info
async function getBatteryInfo() {
    try {
        if ('getBattery' in navigator) {
            const battery = await navigator.getBattery();
            const level = Math.round(battery.level * 100);
            const charging = battery.charging;
            return { level, charging, available: true };
        }
        return { level: 0, charging: false, available: false };
    } catch (error) {
        return { level: 0, charging: false, available: false };
    }
}

// Get current day
function getCurrentDay() {
    const days = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
    const now = new Date();
    return days[now.getDay()];
}

// Get full date
function getFullDate() {
    const months = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 
                    'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
    const now = new Date();
    return `${now.getDate()} ${months[now.getMonth()]} ${now.getFullYear()}`;
}

// Get detailed time
function getDetailedTime() {
    const now = new Date();
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    const seconds = now.getSeconds().toString().padStart(2, '0');
    return `${hours}:${minutes}:${seconds}`;
}

// Add typing indicator
function addTypingIndicator() {
    const container = document.getElementById('chatContainer');
    const messageDiv = document.createElement('div');
    const id = 'typing-' + Date.now();
    messageDiv.id = id;
    messageDiv.className = 'message ai';
    
    const avatar = document.createElement('div');
    avatar.className = 'avatar ai-avatar';
    const icon = document.createElement('i');
    icon.className = 'fa-solid fa-robot';
    avatar.appendChild(icon);
    
    const contentDiv = document.createElement('div');
    contentDiv.className = 'message-content';
    
    const bubble = document.createElement('div');
    bubble.className = 'message-bubble';
    
    const typing = document.createElement('div');
    typing.className = 'typing-indicator';
    typing.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
    
    bubble.appendChild(typing);
    contentDiv.appendChild(bubble);
    messageDiv.appendChild(avatar);
    messageDiv.appendChild(contentDiv);
    container.appendChild(messageDiv);
    
    container.scrollTop = container.scrollHeight;
    
    return id;
}

// Remove typing indicator
function removeTypingIndicator(id) {
    const element = document.getElementById(id);
    if (element) {
        element.remove();
    }
}

// Clear chat
function clearChat() {
    if (confirm('Apakah Anda yakin ingin menghapus semua riwayat chat?')) {
        chatHistory = [];
        const container = document.getElementById('chatContainer');
        container.innerHTML = '';
        
        // Show welcome screen again
        const welcomeScreen = document.createElement('div');
        welcomeScreen.className = 'welcome-screen';
        welcomeScreen.id = 'welcomeScreen';
        welcomeScreen.innerHTML = `
            <div class="welcome-hero">
                <div class="hero-icon">
                    <i class="fa-solid fa-robot"></i>
                </div>
                <h1 class="hero-title">Selamat Datang di ZainAI</h1>
                <p class="hero-subtitle">Asisten AI Cerdas Bertenaga VPS - Siap Membantu Anda</p>
            </div>
            <div class="features-section">
                <h3 class="section-title">Apa yang bisa saya bantu?</h3>
                <div class="feature-grid">
                    <div class="feature-card" onclick="sendPrompt('Jelaskan tentang artificial intelligence dan machine learning')">
                        <i class="fa-solid fa-lightbulb feature-icon"></i>
                        <h4 class="feature-title">Pengetahuan</h4>
                        <p class="feature-desc">Pertanyaan umum & edukasi</p>
                    </div>
                    <div class="feature-card" onclick="sendPrompt('Buatkan contoh kode Python untuk web scraping')">
                        <i class="fa-solid fa-code feature-icon"></i>
                        <h4 class="feature-title">Pemrograman</h4>
                        <p class="feature-desc">Coding & debugging</p>
                    </div>
                    <div class="feature-card" onclick="sendPrompt('Buatkan cerita pendek tentang petualangan di luar angkasa')">
                        <i class="fa-solid fa-book feature-icon"></i>
                        <h4 class="feature-title">Kreativitas</h4>
                        <p class="feature-desc">Menulis & brainstorming</p>
                    </div>
                    <div class="feature-card" onclick="sendPrompt('Analisis tren teknologi AI di tahun 2024')">
                        <i class="fa-solid fa-chart-line feature-icon"></i>
                        <h4 class="feature-title">Analisis</h4>
                        <p class="feature-desc">Data & insights</p>
                    </div>
                    <div class="feature-card" onclick="sendPrompt('Berikan tips produktivitas untuk bekerja dari rumah')">
                        <i class="fa-solid fa-briefcase feature-icon"></i>
                        <h4 class="feature-title">Produktivitas</h4>
                        <p class="feature-desc">Tips & strategi</p>
                    </div>
                    <div class="feature-card" onclick="sendPrompt('Jelaskan konsep blockchain dengan bahasa sederhana')">
                        <i class="fa-solid fa-graduation-cap feature-icon"></i>
                        <h4 class="feature-title">Pembelajaran</h4>
                        <p class="feature-desc">Tutorial & panduan</p>
                    </div>
                </div>
            </div>
        `;
        container.appendChild(welcomeScreen);
        
        // Update welcome screen sesuai mode aktif
        updateWelcomeScreenForWormMode(responseStyle === 'angry');
        
        showNotification('Chat berhasil dihapus', 'success');
    }
}

// Settings modal functions
function openSettings() {
    document.getElementById('settingsModal').classList.add('active');
}

function closeSettings() {
    document.getElementById('settingsModal').classList.remove('active');
}

function saveSettings() {
    const keyInput = document.getElementById('apiKeyInput').value.trim();
    const temp = parseFloat(document.getElementById('tempSlider').value);
    
    if (!keyInput) {
        showNotification('Token tidak boleh kosong!', 'error');
        return;
    }
    
    // Validate API key format (basic check)
    if (!keyInput.startsWith('gsk_')) {
        showNotification('Format API Key tidak valid.Token harus diawali dengan "gsk_"', 'error');
        return;
    }
    
    apiKey = keyInput;
    temperature = temp;
    
    localStorage.setItem('groqApiKey', apiKey);
    localStorage.setItem('groqTemp', temperature);
    localStorage.setItem('responseLength', responseLength);
    localStorage.setItem('responseStyle', responseStyle);
    
    showNotification('Pengaturan berhasil disimpan!', 'success');
    closeSettings();
}

function updateTempValue(value) {
    document.getElementById('tempValue').textContent = value;
}

function togglePassword(inputId) {
    const input = document.getElementById(inputId);
    const button = event.currentTarget;
    const icon = button.querySelector('i');
    
    if (input.type === 'password') {
        input.type = 'text';
        icon.className = 'fa-solid fa-eye-slash';
    } else {
        input.type = 'password';
        icon.className = 'fa-solid fa-eye';
    }
}

// Info modal functions
function showInfo() {
    document.getElementById('infoModal').classList.add('active');
}

function closeInfo() {
    document.getElementById('infoModal').classList.remove('active');
}

// Show notification
function showNotification(message, type = 'info') {
    // Remove existing notification
    const existing = document.querySelector('.notification');
    if (existing) {
        existing.remove();
    }
    
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.style.cssText = `
        position: fixed;
        top: 80px;
        right: 20px;
        background: ${type === 'error' ? '#ff4444' : type === 'success' ? '#00ff88' : '#00d9ff'};
        color: ${type === 'success' ? '#000' : '#fff'};
        padding: 16px 24px;
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        z-index: 2000;
        animation: slideInRight 0.3s ease;
        font-weight: 600;
        max-width: 300px;
    `;
    
    const icon = type === 'error' ? 'fa-circle-exclamation' : type === 'success' ? 'fa-circle-check' : 'fa-circle-info';
    notification.innerHTML = `<i class="fa-solid ${icon}"></i> ${message}`;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// Add CSS for notification animation
const style = document.createElement('style');
style.textContent = `
    @keyframes slideInRight {
        from {
            transform: translateX(400px);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
    @keyframes slideOutRight {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(400px);
            opacity: 0;
        }
    }
    .notification {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    code {
        background: rgba(0, 217, 255, 0.1);
        padding: 2px 6px;
        border-radius: 4px;
        font-family: 'Courier New', monospace;
        font-size: 0.9em;
    }
    pre {
        background: rgba(0, 0, 0, 0.3);
        padding: 12px;
        border-radius: 8px;
        overflow-x: auto;
        margin: 10px 0;
    }
    pre code {
        background: none;
        padding: 0;
    }
`;
document.head.appendChild(style);

// Close modals on escape key
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        closeSettings();
        closeInfo();
    }
});

// Prevent form submission
document.addEventListener('submit', (e) => {
    e.preventDefault();
});
</script>
</body>
</html>